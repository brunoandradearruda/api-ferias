<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Funcionário</title>
    <link rel="stylesheet" href="/webjars/bootstrap/5.3.0/css/bootstrap.min.css">
    <!-- Adicionando ícones Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.21.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Adicionando ícones personalizados -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
        <symbol id="person" viewBox="0 0 16 16">
            <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zM8 2a3.5 3.5 0 0 1 3.308 2.18c.022.059.044.117.067.176A5.5 5.5 0 0 1 8 5.5a5.5 5.5 0 0 1-3.375-1.144c.024-.059.046-.117.067-.176A3.5 3.5 0 0 1 8 2zm0 1.5a2 2 0 0 0-1.849 1.216 7.512 7.512 0 0 1 3.698 0A2 2 0 0 0 8 3.5zM3.072 9.073c.123-.283.26-.558.406-.825a8.482 8.482 0 0 0 3.045-.648c.147.243.291.491.426.742a7.482 7.482 0 0 1-2.13 1.057c.22.274.45.545.695.811zm-.791 2.014c.356-.556.733-1.102 1.128-1.637a9.514 9.514 0 0 0 1.707 1.58 9.514 9.514 0 0 0 1.707-1.58c.395.535.772 1.081 1.128 1.637a11.48 11.48 0 0 1-4.063 1.273 11.48 11.48 0 0 1-4.063-1.273zM2.5 9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM2 9.5a3 3 0 1 0 6 0 3 3 0 0 0-6 0z"/>
        </symbol>
    </svg>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-primary">
    <!--    <a class="navbar-brand" href="#">Minha Empresa</a>-->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav mx-auto">
            <li class="nav-item">
                <a class="nav-link text-white" href="/">Home</a>
            </li>
            <li class="nav-item active">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownFuncionarios" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Funcionários
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownFuncionarios">
                        <a class="dropdown-item" href="/cadastro">Cadastro</a>
                        <a class="dropdown-item" href="/funcionarios/listar">Listar</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownFerias" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Férias
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownFerias">
                        <a class="dropdown-item" href="/registroFerias">Cadastrar</a>
                        <a class="dropdown-item" href="/historicoFeriasModel">Histórico</a>
                        <a class="dropdown-item" href="/funcionarios-em-ferias">Em Férias</a>
                        <a class="dropdown-item" href="/ferias/pendentes">Férias Pendentes</a>
                        <a class="dropdown-item" href="/ferias/direito">Direito à Férias</a>
                    </div>
                </div>
            </li>
            <!-- Novo menu "Departamento" -->
            <li class="nav-item">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownDepartamento" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Departamento
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownDepartamento">
                        <a class="dropdown-item" href="/departamentos/cadastrar">Cadastrar</a>
                        <a class="dropdown-item" href="/departamentos/listar">Exibir</a>
                    </div>
                </div>
            </li>
            <!-- Fim do novo menu -->
            <!-- Novo menu "Cargos" -->
            <li class="nav-item">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownCargos" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Cargos
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownCargos">
                        <a class="dropdown-item" href="/cargos/cadastrar">Cadastrar</a>
                        <a class="dropdown-item" href="/cargos/exibir">Exibir</a>
                    </div>
                </div>
            </li>
            <!-- Fim do novo menu -->
            <!-- Novo menu "Ocorrências" -->
            <li class="nav-item">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdownOcorrencias" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Ocorrências
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownOcorrencias">
                        <a class="dropdown-item" href="/ocorrencias/afastamento">Afastamento</a>
                        <!-- Adicione mais opções conforme necessário -->
                    </div>
                </div>
            </li>
            <!-- Fim do novo menu -->
        </ul>
    </div>
</nav>

<div class="container mt-5">
    <h2 class="mb-4"><i class="bi bi-person-plus"></i> Cadastro de Funcionário</h2>

    <!-- Formulário de cadastro -->
    <form th:action="@{/cadastro}" th:object="${funcionarios}" method="post">
        <!-- Informações Pessoaisa -->

        <div class="row g-3 mb-3">
            <div class="col-md-2"> <!-- Diminui a largura do campo matrícula -->
                <label for="matricula" class="form-label">Matrícula</label>
                <input type="text" class="form-control" id="matricula" name="matricula" required
                       placeholder="184.351-6">
            </div>
            <div class="col-md-6"> <!-- Ajusta o campo nome para ocupar mais espaço -->
                <label for="nome" class="form-label">Nome</label>
                <input type="text" class="form-control" id="nome" name="nome" required>
            </div>

            <div class="col-md-4">
                <label for="setor" class="form-label">Setor</label>
                <select class="form-control" id="setor" name="setor" required>
                    <option value="">Selecione o Departamento</option>
                    <option th:each="departamento : ${departamentos}" th:value="${departamento.nomeDepartamento}" th:text="${departamento.nomeDepartamento}"></option>
                </select>
            </div>

            <div class="col-md-3"> <!-- Ajusta para uma proporção adequada para o campo Função -->
                <label for="funcao" class="form-label">Função</label>
                <input type="text" class="form-control" id="funcao" name="funcao" required>
            </div>
            <div class="col-md-3"> <!-- Ajusta para uma proporção adequada para o campo Unidade de Trabalho -->
                <label for="unidadeTrabalho" class="form-label">Unidade de Trabalho</label>
                <input type="text" class="form-control" id="unidadeTrabalho" name="unidadeTrabalho" required>
            </div>
            <div class="col-md-3"> <!-- Ajusta para uma proporção adequada para o campo Cargo -->
                <label for="cargo" class="form-label">Cargo</label>
                <input type="text" class="form-control" id="cargo" name="cargo" required>
            </div>
            <div class="col-md-3"> <!-- Ajusta para uma proporção adequada para o campo Símbolo -->
                <label for="simbolo" class="form-label">Símbolo</label>
                <input type="text" class="form-control" id="simbolo" name="simbolo" required>
            </div>

                <div class="col-md-2">
                    <label for="dataNascimento" class="form-label">Data de Nascimento</label>
                    <input type="date" class="form-control" id="dataNascimento" name="dataNascimento" required>
                </div>
                <div class="col-md-1">
                    <label for="sexo" class="form-label">Sexo</label>
                    <input type="text" class="form-control" id="sexo" name="sexo" required>
                </div>
                <div class="col-md-2">
                    <label for="pisPasep" class="form-label">PIS/PASEP</label>
                    <input type="text" class="form-control" id="pisPasep" name="pisPasep" required>
                </div>
                <div class="col-md-2">
                    <label for="cpf" class="form-label">CPF</label>
                    <input type="text" class="form-control" id="cpf" name="cpf" required>
                </div>
                <div class="col-md-3">
                    <label for="identidade" class="form-label">RG</label>
                    <input type="text" class="form-control" id="identidade" name="identidade" required>
                </div>
                <div class="col-md-2">
                    <label for="orgaoExpedidor" class="form-label">Orgão Expedidor</label>
                    <input type="text" class="form-control" id="orgaoExpedidor" name="orgaoExpedidor" required>
                </div>
            </div>

        <div class="row g-2 mb-3">
            <div class="col-md-4">
                <label for="email" class="form-label">E-mail</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>

            <div class="col-md-3">
                <label for="celular" class="form-label">Celular</label>
                <input type="tel" class="form-control" id="celular" name="celular" required>
            </div>

            <div class="col-md-3">
                <label for="dataAdmissao" class="form-label">Data de Admissão</label>
                <input type="date" class="form-control" id="dataAdmissao" name="dataAdmissao" required>
            </div>
        </div>


        <div class="mb-3">
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="comissionado" name="tipoContratacao" value="comissionado" onclick="toggleCheckbox(this)">
                <label class="form-check-label" for="comissionado">Comissionado</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="efetivo" name="tipoContratacao" value="efetivo" onclick="toggleCheckbox(this)">
                <label class="form-check-label" for="efetivo">Efetivo</label>
            </div>
        </div>


        <div class="row g-3 mb-3">
                <div class="col-md-2">
                    <label for="cep" class="form-label">CEP</label>
                    <input type="text" class="form-control" id="cep" name="cep" required>
                </div>
                <div class="col-md-3">
                    <label for="endereco" class="form-label">Endereço</label>
                    <input type="text" class="form-control" id="endereco" name="endereco" required>
                </div>
                <div class="col-md-2">
                    <label for="bairro" class="form-label">Bairro</label>
                    <input type="text" class="form-control" id="bairro" name="bairro" required>
                </div>
                <div class="col-md-1">
                    <label for="numero" class="form-label">Número</label>
                    <input type="text" class="form-control" id="numero" name="numero" required>
                </div>
                <div class="col-md-2">
                    <label for="complemento" class="form-label">Complemento</label>
                    <input type="text" class="form-control" id="complemento" name="complemento">
                </div>
                <div class="col-md-1">
                    <label for="cidade" class="form-label">Cidade</label>
                    <input type="text" class="form-control" id="cidade" name="cidade" required>
                </div>
                <div class="col-md-1">
                    <label for="estado" class="form-label">Estado</label>
                    <input type="text" class="form-control" id="estado" name="estado" required>
                </div>
            </div>


            <!-- Botão de Cadastro -->
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Cadastrar
        </button>

        <button type="button" class="btn btn-secondary" onclick="limparCampos()">
            <i class="fas fa-eraser"></i> Limpar Campos
        </button>


    </form>
</div>


<script>
    function limparCampos() {
        // Pega todos os elementos de input do tipo 'text', 'email', 'tel', 'date', e 'select'
        var inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="date"], select');

        // Limpa cada campo
        inputs.forEach(function(input) {
            if (input.tagName === "SELECT") {
                // Para campos select, seleciona a primeira opção
                input.selectedIndex = 0;
            } else {
                // Para outros tipos de input, apenas limpa o valor
                input.value = "";
            }
        });
    }
</script>

<script>
    function toggleCheckbox(current) {
        var checkboxes = document.querySelectorAll('input[type="checkbox"][name="tipoContratacao"]');
        checkboxes.forEach(function(checkbox) {
            if (checkbox !== current) {
                checkbox.checked = false;
            }
        });
    }
</script>

<script>
    document.getElementById('cep').addEventListener('blur', function(e) {
        var cep = e.target.value.replace(/\D/g, ''); // Remove máscara do CEP, se houver
        if(cep.length !== 8) {
            alert("CEP inválido!");
            return;
        }
        var url = `https://viacep.com.br/ws/${cep}/json/`;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                if(data.erro) {
                    alert("CEP não encontrado!");
                    return;
                }
                document.getElementById('endereco').value = data.logradouro;
                document.getElementById('bairro').value = data.bairro;
                document.getElementById('cidade').value = data.localidade;
                document.getElementById('estado').value = data.uf;
            })
            .catch(error => console.error('Erro ao consultar o CEP:', error));
    });
</script>
<link rel="stylesheet" th:href="@{/webjars/font-awesome/5.15.1/css/all.css}" />

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="js/cep.js"></script> <!-- Inclua o caminho correto para o seu arquivo js/cep.js -->
</body>
</html>
